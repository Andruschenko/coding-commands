---
title: 'npm'
description: 'npm modules - the big repository of javascript development tools'
date: '2019-08-20T23:46:37.121Z'
author: 'Andr√© Kovac'
category: 'tool'
tags: ['javascript', 'npm', 'dev-ops']
---

## important npm commands

| Command | Result |
| --- | --- |
| `$ npm <COMMAND> -h` | show help of `<COMMAND>` |
| `$ npm install <pkg> --save` or `$ npm i <pkg> --save` | install and save as dependency in `package.json` |
| `$ npm install mocha --save-dev` | install development dependency |
| `$ NODE_ENV=production npm install` `$ npm install --production` | will not install dev dependencies |
| `$ npm outdated` | Show outdated packages |
| `$ npm outdated -g` | Show outdated global packages |
| `$ npm update` | Update dependencies in `package.json` to newest versions |
| `$ npm update http-server -g` | update a global package |
| `$ npm uninstall colors --save` | uninstall and remove from `package.json` |
| `$ npm uninstall colors --save-dev` | uninstall development dependency |

---

| Command | Result |
| --- | --- |
| `$ npm list -g --depth=0` or `npm ls -g --depth=0` | show all globally installed top level packages |

## `npm ci`

This command deletes the `node_modules` folder every single time!

## lock-file

As of npm version `5.7.0` you can use

```bash
npm install --package-lock-only
```

It will automatically fix merge conflicts in `package-lock.json` files, however, not in `package.json` files.

## Install packages as local dependencies in your project

1. *cd* to your project folder

2. Add a `package.json` configuration file for *npm* with:

    ```bash
	npm init
    ```

	This opens an utility that will walk you through creating a package.json file.

	or

    ```bash
	npm init -f
    ```

	fills out stuff itself!

## Add a local folder as npm dependency

e.g. a local version of `material-ui`. Pay attention to the three `///` right after `file:`:

```json
"material-ui": "file:///Users/andrekovac/dev/__projects/artirigo/proxipedia/proxipedia2.0/material-ui-andre/build",
```

## npm-check-updates (`ncu`)

Show any new dependencies

```bash
ncu
```

Update packages

```bash
ncu -u
npm install
```

## Manually adding to npm file

### Semantic versioning

* `"jQuery": "~2.0.3",` Most recent up to patch release
* `"jQuery": "^2.0.3",` Most recent up to minor release
* `"jQuery": "2.0.3",` That particular version

---


## Distribute npm file

[Overview](https://docs.npmjs.com/misc/developers)

1. Create an npm account
2. `$ npm login` to login to that account
3. `$ npm init` to fill out fields like license, homepage, version etc.
4. `$ npm install ../path/to/your/project` to test the package and your instructions in the README.
5. `$ npm publish` to publish your package

#### Update

1. `npm version <update_type>` (see [this link](https://docs.npmjs.com/getting-started/publishing-npm-packages)) where `<update_type>` equals `patch`, `minor`, or `major`.
2. Update the project's `CHANGELOG` and add that change to the commit generated by the `npm version` command via `git commit --amend`.
2. `npm publish` to publish the update.
3. `git push` to push your changes to GitHub.
3. `git push origin --tags` to push the newly created tag to the remote repository so that you can add release notes there.
4. Go to the Github page of the project, then to `release`. There to the `tags` tab and then click on the three dots `...` in the row of the new release you want to add notes to. There you choose "create a new `release`". Add some release notes there.

`npm version patch -m "Upgrade to %s for reasons"` to update with a message.

## Pre and Post hooks

just prepend script name with `pre` or `post`, e.g. `npm run foo` will execute `npm run prefoo` before and `npm run postfoo` right after the script.

See [this nice npm guide](https://www.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/)

## Difference between npm and bower

[See this stackoverflow discussion](http://stackoverflow.com/questions/18641899/what-is-the-difference-between-bower-and-npm)

The biggest difference is that npm does **nested dependency tree** (size heavy) while Bower requires a flat dependency tree (puts the burden of dependency resolution on the user).

> A **nested dependency tree** means that your dependencies can have its own dependencies which can have their own, and so on. This is really great on the server where you don't have to care much about space and latency. It lets you not have to care about dependency conflicts as all your dependencies use e.g. their own version of Underscore. This obviously doesn't work that well on the front-end. Imagine a site having to download three copies of jQuery.